# Minedrop Game by miroslav

Копия слота Minedrop с расширением для браузера, которое предоставляет бонусы.

## Структура проекта

```
.
├── index.html              # Главная страница с игрой
├── console.html            # Консольный вид игры
├── exit.html               # Страница выхода
├── extension/              # Расширение для браузера
│   ├── manifest.json       # Манифест расширения
│   ├── content.js          # Content script для перехвата запросов
│   ├── inject.js           # Скрипт для инжекции в игру
│   ├── background.js       # Background service worker
│   ├── popup.html          # Интерфейс расширения (HTML)
│   ├── popup.js            # Интерфейс расширения (JS)
│   ├── create-icons.html   # Утилита для создания иконок
│   └── icon*.png           # Иконки расширения (16, 48, 128)
├── api/                    # API endpoints для Vercel
│   ├── status.js           # Общий endpoint статуса
│   └── minedrop/
│       └── status.js        # Endpoint статуса minedrop
├── vercel.json             # Конфигурация для деплоя на Vercel
├── package.json            # Конфигурация npm
└── README.md               # Этот файл
```

## Установка расширения

### Шаг 1: Создание иконок

1. Откройте файл `extension/create-icons.html` в браузере
2. Нажмите кнопку "Создать все иконки"
3. Сохраните скачанные файлы `icon16.png`, `icon48.png`, `icon128.png` в папку `extension/`

**Альтернатива:** Создайте иконки вручную размером 16x16, 48x48 и 128x128 пикселей с буквой "M" или логотипом.

### Шаг 2: Установка в браузер

1. Откройте Chrome/Edge
2. Перейдите в `chrome://extensions/` или `edge://extensions/`
3. Включите "Режим разработчика" (Developer mode) в правом верхнем углу
4. Нажмите "Загрузить распакованное расширение" (Load unpacked)
5. Выберите папку `extension` из этого проекта
6. Расширение установлено! Иконка появится в панели расширений

## Деплой на Vercel через GitHub

### Шаг 1: Создание репозитория

1. Создайте новый репозиторий на GitHub
2. Назовите его, например, `minedrop-game`

### Шаг 2: Загрузка кода

```bash
# Инициализация git (если еще не сделано)
git init

# Добавление всех файлов
git add .

# Коммит
git commit -m "Initial commit: Minedrop game with extension"

# Добавление remote репозитория (замените на ваш URL)
git remote add origin https://github.com/ваш-username/minedrop-game.git

# Отправка кода
git branch -M main
git push -u origin main
```

### Шаг 3: Деплой на Vercel

1. Зайдите на [vercel.com](https://vercel.com)
2. Войдите через GitHub
3. Нажмите "Add New Project"
4. Выберите ваш репозиторий `minedrop-game`
5. Vercel автоматически определит настройки
6. Нажмите "Deploy"
7. После деплоя вы получите URL вида `https://your-project.vercel.app`

### Шаг 4: Настройка домена (опционально)

1. В настройках проекта Vercel перейдите в "Domains"
2. Добавьте свой домен или используйте предоставленный Vercel

## Использование

1. Установите расширение в браузер (см. выше)
2. Откройте ваш сайт на Vercel
3. Перейдите на страницу с игрой (например, `/console.html` или `/minedrop/console`)
4. Расширение автоматически активируется и начнет добавлять бонусы

## Функции расширения

- ✅ **Автоматическое добавление +1000 к балансу** - при каждой загрузке данных игры
- ✅ **Увеличение выигрыша в 1.5 раза** - все выигрыши умножаются на 1.5
- ✅ **Перехват и модификация API запросов** - модифицирует ответы от сервера игры
- ✅ **Работа с WebSocket соединениями** - перехватывает WebSocket сообщения
- ✅ **Модификация XMLHttpRequest** - перехватывает AJAX запросы
- ✅ **Инжекция скриптов в игру** - внедряет код напрямую в контекст игры

## Технические детали

### Как работает расширение

1. **Content Script** (`content.js`) загружается на всех страницах, соответствующих паттернам в `manifest.json`
2. Он перехватывает `fetch` и `XMLHttpRequest` запросы к `stake-engine.com`
3. Модифицирует ответы, добавляя бонусы к балансу и выигрышам
4. **Inject Script** (`inject.js`) внедряется в контекст страницы игры для дополнительной модификации
5. **Background Worker** отслеживает обновления вкладок и управляет расширением

### API Endpoints

- `GET /api/status` - Проверка общего статуса
- `GET /minedrop/api/status` - Проверка статуса сессии minedrop

### Безопасность

⚠️ **Важно:** Это расширение предназначено только для демонстрационных целей. В реальном казино такие модификации не работают, так как серверная сторона проверяет все данные.

## Разработка

### Локальный запуск

```bash
# Установка зависимостей (если нужно)
npm install

# Запуск локального сервера (через Vercel CLI)
npm run dev

# Или используйте любой другой локальный сервер
# Например, Python:
python -m http.server 8000
```

### Изменение логики бонусов

Откройте файл `extension/content.js` и найдите строки:
- `data.balance = parseFloat(data.balance) + 1000;` - измените 1000 на нужное значение
- `data.win = parseFloat(data.win) * 1.5;` - измените 1.5 на нужный множитель

Аналогичные изменения можно сделать в `extension/inject.js`.

## Устранение неполадок

### Расширение не работает

1. Проверьте, что расширение установлено и включено
2. Откройте консоль разработчика (F12) и проверьте наличие ошибок
3. Убедитесь, что страница игры загружается в iframe
4. Проверьте, что расширение имеет доступ к нужным доменам

### API не отвечает

1. Проверьте конфигурацию `vercel.json`
2. Убедитесь, что файлы в папке `api/` правильно экспортируют функции
3. Проверьте логи в Vercel Dashboard

## Автор

**miroslav**

## Лицензия

MIT

